<div style="height: 60px;width: 100%;">
    <img style="height: 60px;position: absolute;right: 0px;" src="recursos/imgs/H1.png">
    <p style="position: absolute;color: #294667;margin-left: 42px;margin-top: 26px;font-size: 12px;">TÓPICO<strong>
            2</strong></p>
    <p style="position: absolute;color: #294667;margin-left: 112px;margin-top: 26px;font-size: 11px;width: 450px;">
        TRABALHO DO GESTOR DA ATENÇÃO PRIMÁRIA À SAÚDE</p>
</div>
<div style="margin-top: 40px;margin-left: 40px;width: 808px;">
    <p>Que tal conhecer as práticas requeridas aos gerentes de serviços na ESF e as respectivas competências? Para isso,
        relacione cada prática a seguir a sua competência.</p>
</div>
<div>
    <div
        style="margin-top: 10px;margin-left: 12px;background-color: #004c72;width: 480px;height: 260px;border-radius: 10px;position: absolute;">
    </div>
    <div
        style="z-index: 100;display: inline-flex;margin-top: 140px;margin-left: 28px;width: 450px;justify-content: space-between;position: absolute;">
        <img id="volta" src="recursos/imgs/volta.png" style="width: 20px; cursor: pointer; opacity: 0;">
        <img id="avanca" src="recursos/imgs/avanca.png" style="width: 20px; cursor: pointer; opacity: 0.6;">
    </div>
    <div>
        <div id="feedCerto"
            style="background-color: rgb(255, 168, 0); position: absolute; top: 336px; left: 362px; width: 100px; border-radius: 10px;">
            <p style="color: white;margin-left: 9px;">Muito bem!</p>
        </div>
        <div id="feedErrado"
            style="background-color: rgb(255, 168, 0); position: absolute; top: 337px; left: 17px; width: 140px; border-radius: 10px; ">
            <p style="color: white;margin-left: 9px;">Tente novamente.</p>
        </div>
    </div>
    <div id="janela_1">
        <div
            style="position: absolute;margin-left: 107px;margin-right: auto;color: white;width: 318px;height: 230px;margin-top: 60px;align-items: center;">
            <p>
                Zelar pelo bom uso dos recursos, evitando o desabastecimento.
            </p>
            <p>
                Dimensão: gerir.
            </p>
        </div>
        <div id="drop_1"
            style="position: absolute; top: 340px; left: 162px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_2">
        <div
            style="position: absolute;margin-left: 73px;margin-right: auto;color: white;width: 390px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Estimular o vínculo entre os profissionais, favorecendo o trabalho em equipe.
            </p>
            <p>
                Dimensão: gerir.
            </p>
        </div>
        <div id="drop_2"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_3">
        <div
            style="position: absolute;margin-left: 97px;margin-right: auto;color: white;width: 380px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Representar o serviço sob sua gerência e articular com demais atores da gestão.
            </p>
            <p>
                Dimensão: participar politicamente.
            </p>
        </div>
        <div id="drop_3"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_4">
        <div
            style="position: absolute;margin-left: 107px;margin-right: auto;color: white;width: 360px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Conhecer a rede de serviços e equipamentos sociais do território.
            </p>
            <p>
                Dimensão: gerir e investigar.
            </p>
        </div>
        <div id="drop_4"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_5">
        <div
            style="position: absolute;margin-left: 117px;margin-right: auto;color: white;width: 460px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Conhecer a Rede de Atenção à Saúde.
            </p>
            <p>
                Dimensão: investigar.
            </p>
        </div>
        <div id="drop_5"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_6">
        <div
            style="position: absolute;margin-left: 77px;margin-right: auto;color: white;width: 380px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Potencializar e orientar a utilização de equipamentos e recursos físicos e tecnológicos.
            </p>
            <p>
                Dimensão: ensinar.
            </p>
        </div>
        <div id="drop_6"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_7">
        <div
            style="position: absolute;margin-left: 107px;margin-right: auto;color: white;width: 330px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Identificar as necessidades de qualificação dos profissionais.
            </p>
            <p>
                Dimensão: ensinar.
            </p>
        </div>
        <div id="drop_7"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_8">
        <div
            style="position: absolute;margin-left: 87px;margin-right: auto;color: white;width: 360px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Assegurar a alimentação de dados nos sistemas de informação, divulgando e utilizando-os para análise
                e
                planejamento das
                ações.
            </p>
            <p>
                Dimensão: gerir.
            </p>
        </div>
        <div id="drop_8"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_9">
        <div
            style="position: absolute;margin-left: 87px;margin-right: auto;color: white;width: 400px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Desenvolver gestão participativa e estimular a participação dos profissionais e dos usuários em
                instâncias de controle
                social.
            </p>
            <p>
                Dimensão: gerir e participar politicamente.
            </p>
        </div>
        <div id="drop_9"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_10">
        <div
            style="position: absolute;margin-left: 97px;margin-right: auto;color: white;width: 320px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Acompanhar, orientar e monitorar o trabalho das equipes sob sua gerência.
            </p>
            <p>
                Dimensão: gerir e ensinar.
            </p>
        </div>
        <div id="drop_10"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_11">
        <div
            style="position: absolute;margin-left: 137px;margin-right: auto;color: white;width: 460px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Mediar conflitos e resolver problemas.
            </p>
            <p>
                Dimensão: gerir.
            </p>
        </div>
        <div id="drop_11"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_12">
        <div
            style="position: absolute;margin-left: 107px;margin-right: auto;color: white;width: 320px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Incentivar a participação dos profissionais na organização dos fluxos na UBS.
            </p>
            <p>
                Dimensão: gerir e ensinar.
            </p>
        </div>
        <div id="drop_12"
            style="position: absolute; top: 340px; left: 172px; background-color: gray; width: 181px; height: 39px; opacity: 0.5;">
        </div>
    </div>
    <div id="janela_13">
        <div
            style="position: absolute;margin-left: 67px;margin-right: auto;color: white;width: 380px;height: 230px;margin-top: 68px;align-items: center;">
            <p>
                Orientar o processo de territorialização, diagnóstico situacional, planejamento e programação das
                equipes, avaliando
                resultados e propondo estratégias para o alcance de metas de saúde.
            </p>
            <p>
                Dimensão: gerir e assistir.
            </p>
        </div>
        <div id="drop_13"
            style="position: absolute;top: 340px;left: 172px;background-color: gray;width: 181px;height: 39px;opacity: .5;">
        </div>
    </div>
</div>
<div>
    <div id="drag_5" style="position: absolute;left: 505px;top: 340px;">
        <img src="recursos/imgs/texto4.png" style="width: 180px;">
    </div>
    <div id="drag_4" style="position: absolute;left: 505px;top: 340px;">
        <img src="recursos/imgs/texto4.png" style="width: 180px;">
    </div>
    <div id="drag_11" style="position: absolute;left: 505px;top: 180px;">
        <img src="recursos/imgs/texto9.png" style="width: 180px;">
    </div>
    <div id="drag_13" style="position: absolute;left: 505px;top: 220px;">
        <img src="recursos/imgs/texto10.png" style="width: 180px;">
    </div>
    <div id="drag_3" style="position: absolute;left: 505px;top: 260px;">
        <img src="recursos/imgs/texto3.png" style="width: 180px;">
    </div>
    <div id="drag_2" style="position: absolute;left: 505px;top: 300px;">
        <img src="recursos/imgs/texto2.png" style="width: 180px;">
    </div>
    <div id="drag_7" style="position: absolute;left: 695px;top: 340px;">
        <img src="recursos/imgs/texto5.png" style="width: 180px;">
    </div>
    <div id="drag_6" style="position: absolute;left: 695px;top: 340px;">
        <img src="recursos/imgs/texto5.png" style="width: 180px;">
    </div>
    <div id="drag_1" style="position: absolute;left: 695px;top: 180px;">
        <img src="recursos/imgs/texto1.png" style="width: 180px;">
    </div>
    <div id="drag_8" style="position: absolute;left: 695px;top: 220px;">
        <img src="recursos/imgs/texto6.png" style="width: 180px;">
    </div>
    <div id="drag_9" style="position: absolute;left: 695px;top: 260px;">
        <img src="recursos/imgs/texto7.png" style="width: 180px;">
    </div>
    <div id="drag_12" style="position: absolute;left: 695px;top: 300px;">
        <img src="recursos/imgs/texto8.png" style="width: 180px;">
    </div>
    <div id="drag_10" style="position: absolute;left: 695px;top: 300px;">
        <img src="recursos/imgs/texto8.png" style="width: 180px;">
    </div>
</div>
<footer
    style="width: 100%;height: 19px;display: flex;background-color: #FFA800;align-items: center;justify-content: flex-start;">
    <p style="color: white;font-size: 11px;margin-left: 40px;">O PROCESSO DE TRABALHO DO GESTOR DA ATENÇÃO PRIMÁRIA À SAÚDE - ESTRATÉGIA SAÚDE DA FAMÍLIA (APS/ESF)</p>
</footer>
<script>
    $(() => {
        let janelas = $(document).find('[id^=janela]');
        let avanca = $(document).find('[id^=avanca]').on('click', fnAvancar).hide();
        //let volta = $(document).find('[id^=volta]').on('click', fnVoltar);
        let contador = 1;
        $(volta).css('opacity', '0');
        apagarJanelas();
        $(document).find('[id=janela_1]').show();

        const empties = $(document).find('[id^=drop]');
        $(document).find('[id^=drag]').css('cursor', 'pointer');
        let drag;
        let voltar = [];
        let positions = [];
        let feeds = $(document).find('[id^=feed]').hide();

        function apagarDragJanelas() {
            feeds.map((index, feed) => {
                $(feed).hide();
            })
        }

        const dragStart = function () {
            this.className += " hold";
            drag = this;
            setTimeout(() => (this.className = "invisible"), 0);
            apagarDragJanelas();
        };

        const dragOver = function (e) {
            e.preventDefault();
        };

        const dragEnter = function (e) {
            e.preventDefault();
            this.className += " hovered";
        };

        const dragLeave = function () {
            this.className = "empty";
        };

        const dragEnd = function () {
            this.className = "drag";
        };

        const dragDrop = function () {
            this.className = "empty";
            if (this.id.indexOf('drop') == 0) {
                $("#" + drag.id).animate({ top: $(this)[0].offsetTop, left: $(this)[0].offsetLeft }, 1);
                if (drag.id.split('_')[1] == this.id.split('_')[1]) {
                    voltar.map((objeto, index) => {
                        if (objeto == drag.id) {
                            voltar[index] = null;
                        }
                    })
                    $("#feedCerto").fadeIn();
                    $(document).find('[id^=avanca]').show();
                    console.log(contador);
                } else {
                    $("#feedErrado").fadeIn();
                    $("#" + drag.id).animate(positions[drag.id.split('_')[1]], 600);
                }
            }
        }

        $(document).find('[id^=drag]').map((index, objeto) => {
            objeto.addEventListener("dragstart", dragStart);
            objeto.addEventListener("dragend", dragEnd);
            positions[objeto.id.split('_')[1]] = { top: objeto.offsetTop, left: objeto.offsetLeft }
        })

        for (const empty of empties) {
            empty.addEventListener("dragover", dragOver);
            empty.addEventListener("dragenter", dragEnter);
            empty.addEventListener("dragleave", dragLeave);
            empty.addEventListener("drop", dragDrop);
            voltar.push(null)
        }

        function fnAvancar() {
            if (contador < janelas.length) {
                apagarJanelas();
                $(document).find(`[id=drag_${contador}]`).hide();
                $(document).find(`[id=drop_${contador}]`).hide();
                contador++;
                $(document).find(`[id=janela_${contador}]`).show();
            }
            mudarBotoes();
            $(document).find('[id^=avanca]').hide();
        }

        function fnVoltar() {
            if (contador > 1) {
                apagarJanelas();
                $(document).find(`[id=drag_${contador}]`).show();
                $(document).find(`[id=drop_${contador}]`).show();
                contador--;
                $(document).find(`[id=janela_${contador}]`).show();
            }
            mudarBotoes();
        }

        function mudarBotoes() {
            if (contador == 1) {
                // $(volta).css('opacity', '0.6');
                $(avanca).css('opacity', '1');
            }
            if (contador == janelas.length) {
                // $(volta).css('opacity', '1');
                $(avanca).css('opacity', '0.6');
            }
            if (contador > 1 && contador < janelas.length) {
                // $(volta).css('opacity', '1');
                $(avanca).css('opacity', '1');
            }
        }

        let botoes = $(document).find('[id^=botao]').map((index, botao) => {
            $(botao).click(() => {
                apagarJanelas();
                mudarBotao(index + 1)
                $(janelas[index + 1]).show();
            })
        })

        function apagarJanelas() {
            $(document).find(`[id^=feedErrado]`).hide();
            $(document).find(`[id^=feedCerto]`).hide();
            janelas.map((index, janela) => {
                $(janela).hide();
            })
        }
    })
</script>